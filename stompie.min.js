angular.module("stompie",[]).factory("$stompie",["$rootScope","$timeout",function(a,b){var c={},d=null,e={},f=function(){b(function(){using(d,_onConnect)},3e3)};return c.connect=function(a,b,c){d=a,_onConnect=b,c=c||{},e.client=new SockJS(d),e.stomp=Stomp.over(e.client),e.stomp.connect(c,b,f)},c.disconnect=function(a){e.stomp.disconnect(a)},c.subscribe=function(b,c){return e.stomp.subscribe(b,function(b){var d=null;try{d=JSON.parse(b.body)}finally{a.$digest(c(d))}})},c.send=function(a,b,c){try{var d=JSON.stringify(b);c=c||{},e.stomp.send(a,c,d)}catch(f){throw f}return this},c}]);